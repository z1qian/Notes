# 测试

## 单元测试

* `.NET CLI` 对创建和运行单元测试提供了内置支持：
  1. `dotnet new mstest` 使用 `MSTest` 创建单元测试
  2. `dotnet new nunit` 使用 `NUnit` 创建单元测试
  3. `dotnet new xunit` 使用 xUnit.net 创建单元测试
* 由于 `.NET` 和 `ASPNET Core` 团队使用了 `xUnit.net`，所以本书中也将使用 `xUnit.net` 来构建测试项目

### 创建单元测试

* 测试项目的名称是在项目名后加上 `Tests`，例如，对于项目 `UnitTestingSamples`，测试项目的名称是 `UnitTestingSamples.Tests`

* 测试类名与被测试的类名相同，后跟 `Test`，例如，`UnitTestingSamplesDeepThought` 的测试类是 `UnitTestingSamples.DeepThoughtTest`

* 单元测试方法名采用描述性的名称，例如，名称 `AddOrUpdateBookAsync_ThrowsForNull` 表示，一个单元测试调用 `AddOrUpdateBookAsync()` 方法，检查传递 `null` 时它是否抛出异常

* 使用 `xUnit.net` 时，需要使用 `Fact`  特性来标记测试方法

  ```c#
  public class DeepThoughtTest
  {
      [Fact]
      public void ResultOfTheAnswerToTheUltimateQuestionOfLifeTheUniverseAndEverything()
      {
          // arrange
          int expected = 42;
          var dt = new DeepThought();
  
          // act
          int actual =
            dt.TheAnswerToTheUltimateQuestionOfLifeTheUniverseAndEverything();
  
          // assert
          Assert.Equal(expected, actual);
      }
  }
  ```

* 

